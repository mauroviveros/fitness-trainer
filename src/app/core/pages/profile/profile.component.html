<mat-toolbar>
  <a mat-icon-button routerLink="" *ngIf="$mode.value !== 1"><mat-icon>home</mat-icon></a>
  <button mat-icon-button (click)="logout()" *ngIf="$mode.value === 1"><mat-icon>logout</mat-icon></button>
  <h1>MI PERFIL</h1>
  <core-image-upload></core-image-upload>
</mat-toolbar>

<section>
  <figure>
    <shared-profile-image></shared-profile-image>

    <button mat-mini-fab *ngIf="$mode.value === 2 && !isLoading" (click)="$mode.next(3)">
      <mat-icon>close</mat-icon>
    </button>
    <button mat-fab type="submit" form="profileForm" *ngIf="$mode.value !== 3 && !isLoading" [disabled]="form.invalid">
      <mat-icon>save</mat-icon>
    </button>

    <button mat-fab *ngIf="$mode.value === 3 && !isLoading" (click)="$mode.next(2)">
      <mat-icon>edit</mat-icon>
    </button>
  </figure>

  <mat-card>
    <mat-card-content>
      <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>
      <form id="profileForm" [formGroup]="form" (submit)="submit()">
        <mat-form-field>
          <mat-label>Nombre</mat-label>
          <mat-icon color="primary" matIconPrefix>person</mat-icon>
          <mat-hint align="end">{{ inputName.value.length }}/{{ MAX_LENGTH }}</mat-hint>
          <mat-error>{{ form.controls['name'].errors | error : MAX_LENGTH }}</mat-error>
          <input placeholder="Ingrese su nombre" formControlName="name" matInput #inputName />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Apellido</mat-label>
          <mat-icon color="primary" matIconPrefix>badge</mat-icon>
          <mat-hint align="end">{{ inputSurname.value.length }}/{{ MAX_LENGTH }}</mat-hint>
          <mat-error>{{ form.controls['surname'].errors | error : MAX_LENGTH }}</mat-error>
          <input placeholder="Ingrese su apellido" formControlName="surname" matInput #inputSurname />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Instagram</mat-label>
          <mat-icon [svgIcon]="'instagram'" color="primary" matIconPrefix></mat-icon>
          <mat-hint align="end">{{ inputInstagram.value.length }}/{{ 30 }}</mat-hint>
          <mat-error>{{ form.controls['instagram'].errors | error : 30 }}</mat-error>
          <input placeholder="Ingrese su instagram" formControlName="instagram" matInput #inputInstagram />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Género</mat-label>
          <mat-icon color="primary" matIconPrefix>wc</mat-icon>
          <mat-error>{{ form.controls['gender'].errors | error }}</mat-error>
          <mat-select placeholder="Ingrese su género" formControlName="gender">
            <mat-option *ngFor="let gender of genres" [value]="gender.value">{{ gender.text }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Fecha de nacimiento</mat-label>
          <mat-icon color="primary" matIconPrefix>cake</mat-icon>
          <mat-hint>DD/MM/YYYY</mat-hint>
          <mat-error>{{ form.controls['birthday'].errors | error }}</mat-error>
          <mat-datepicker [touchUi]="$isMobile | async" #picker [disabled]="false" [startView]="$mode.value === 1 ? 'multi-year' : 'month'">
            <mat-date-range-picker-actions>
              <button mat-button matDateRangePickerCancel>CERRAR</button>
              <button mat-raised-button matDatepickerApply color="primary">ACEPTAR</button>
            </mat-date-range-picker-actions>
          </mat-datepicker>
          <mat-datepicker-toggle [for]="picker" matIconSuffix [tabIndex]="-1"></mat-datepicker-toggle>
          <input placeholder="Elige una fecha" formControlName="birthday" [matDatepicker]="picker" matInput />
        </mat-form-field>

        <mat-form-field>
          <mat-label>Email</mat-label>
          <mat-icon color="primary" matIconPrefix>email</mat-icon>
          <mat-error>{{ form.controls['email'].errors | error }}</mat-error>
          <input placeholder="Ingrese su email" formControlName="email" matInput />
        </mat-form-field>
      </form>
    </mat-card-content>
  </mat-card>
</section>
