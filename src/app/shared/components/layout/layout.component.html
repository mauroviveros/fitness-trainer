<mat-drawer-container [hasBackdrop]="true">
  <mat-drawer #drawer mode="push">
    <mat-toolbar color="primary">
      <shared-profile-image></shared-profile-image>
      <h2>{{ $user | async | user | titlecase }}</h2>
    </mat-toolbar>
    <mat-nav-list>
      <mat-list-item
        *ngFor="let shortcut of $shortcuts | async"
        (click)="shortcut._id === 'logout' ? logout() : undefined"
        [routerLink]="shortcut.link"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }">
        <mat-icon matListItemIcon>{{ shortcut.icon }}</mat-icon>
        <div>{{ shortcut.label | titlecase }}</div>
      </mat-list-item>
    </mat-nav-list>

    <blockquote>
      <span>Copyright Â© 2023</span>
      <span>Powered by <a [href]="POWEREDBY" target="_blank">Mauro Daniel Viveros</a></span>
    </blockquote>
  </mat-drawer>

  <mat-drawer-content>
    <mat-toolbar color="primary">
      <button mat-icon-button (click)="drawer.toggle()" *ngIf="!mode || mode === 3; else closeBtn">
        <mat-icon>menu</mat-icon>
      </button>

      <h1>{{ text }}</h1>

      <ng-content select=".actions"></ng-content>
    </mat-toolbar>
    <main>
      <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
      <section>
        <article *ngIf="!loadingDM; else loadingScreen">
          <ng-content></ng-content>
        </article>
      </section>
    </main>
  </mat-drawer-content>
</mat-drawer-container>

<ng-template #loadingScreen>
  <mat-spinner></mat-spinner>
</ng-template>

<ng-template #closeBtn>
  <a mat-icon-button [routerLink]="['..']">
    <mat-icon>close</mat-icon>
  </a>
</ng-template>
