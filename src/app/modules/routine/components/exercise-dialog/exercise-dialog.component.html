<mat-toolbar mat-dialog-title>{{ title | titlecase }}</mat-toolbar>

<mat-dialog-content>
  <mat-progress-bar mode="indeterminate" *ngIf="isSaving"></mat-progress-bar>
  <form [formGroup]="form" id="Exercise" (submit)="submit()">
    <ng-container *ngIf="mode === 1">
      <mat-form-field>
        <mat-label>Ejercicio</mat-label>
        <mat-icon color="primary" matPrefix>{{ getCategoryIcon(form.controls['category'].value) }}</mat-icon>
        <mat-error>{{ form.controls['exercise'].errors | error }}</mat-error>
        <mat-select formControlName="exercise" placeholder="Seleccione un ejercicio" [compareWith]="compareRef" (selectionChange)="onChangeExercise($event)">
          <mat-option *ngFor="let exercise of $exercises | async" [value]="ref(exercise)">{{ exercise.name }}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Series</mat-label>
        <mat-icon color="primary" matPrefix>format_list_numbered</mat-icon>
        <mat-error>{{ form.controls['series'].errors | error : 0 }}</mat-error>
        <input type="number" formControlName="series" placeholder="Cantidad de series a realizar" matInput />
      </mat-form-field>

      <mat-form-field>
        <mat-label>Repeticiones</mat-label>
        <mat-icon color="primary" matPrefix>replay</mat-icon>
        <mat-error>{{ form.controls['reps'].errors | error : 0 }}</mat-error>
        <input type="number" formControlName="reps" placeholder="Cantidad de repeticiones a realizar por serie" matInput />
      </mat-form-field>

      <mat-form-field>
        <mat-label>RIR</mat-label>
        <mat-icon color="primary" matPrefix>accessibility_new</mat-icon>
        <mat-error>{{ form.controls['rir'].errors | error }}</mat-error>
        <mat-select formControlName="rir" placeholder="Seleccione un tipo de RIR">
          <mat-option *ngFor="let rir of RIR" [value]="rir">{{ rir | rir }}</mat-option>
        </mat-select>
      </mat-form-field>
    </ng-container>

    <ng-container *ngIf="mode !== 1">
      <ng-container formArrayName="weights">
        <mat-form-field *ngFor="let serie of weights.controls; let i = index">
          <mat-label>serie {{ i + 1 }}</mat-label>
          <mat-icon matPrefix>scale</mat-icon>
          <mat-error>{{ weights.controls[i].errors | error }}</mat-error>
          <input type="number" [formControlName]="i" placeholder="KGs utilizados" matInput />
        </mat-form-field>
      </ng-container>

      <mat-form-field>
        <mat-label>Sensaciones</mat-label>
        <mat-icon matIconPrefix>comment</mat-icon>
        <mat-error>{{ form.controls['sensations'].errors | error }}</mat-error>
        <textarea formControlName="sensations" placeholder="Describe tus sensaciones despuÃ©s de completar el ejercicio.." [rows]="4" [disabled]="true" matInput></textarea>
      </mat-form-field>
    </ng-container>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button type="button" color="primary" mat-button mat-dialog-close>cancelar</button>
  <button type="submit" color="primary" form="Exercise" mat-raised-button>guardar</button>
</mat-dialog-actions>
